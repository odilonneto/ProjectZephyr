# Configuração Zephyr - Com Shell e Monitoramento via USB CDC ACM

# --- Configurações Básicas ---
CONFIG_MAIN_STACK_SIZE=2048
CONFIG_LOG=y
CONFIG_LOG_DEFAULT_LEVEL=3

# --- Configuração do GPIO ---
CONFIG_GPIO=y

# --- Configuração do USB Device Stack ---
CONFIG_USB_DEVICE_STACK=y
CONFIG_USB_DEVICE_PRODUCT="STM32F429I Discovery"
CONFIG_USB_DEVICE_MANUFACTURER="Zephyr"
# Habilita o driver CDC ACM (Virtual COM Port)
CONFIG_USB_CDC_ACM=y
# Define o nome do dispositivo que será usado pelo driver CDC ACM
CONFIG_USB_DEVICE_INITIALIZE_AT_BOOT=y


# --- Configuração do Console e Shell sobre USB ---
# Habilita o console
CONFIG_CONSOLE=y
# Habilita o driver de serial, necessário para o backend do shell e console
CONFIG_SERIAL=y
# Permite obter o controle da linha (necessário para CDC ACM)
CONFIG_UART_LINE_CTRL=y

# Habilita o Shell
CONFIG_SHELL=y
# Define o backend do shell para ser o serial (que será o USB CDC ACM)
CONFIG_SHELL_BACKEND_SERIAL=y
# Aumenta o buffer do shell para evitar perdas de caracteres
CONFIG_SHELL_CMD_BUFF_SIZE=256
CONFIG_SHELL_STACK_SIZE=2048


# --- Monitoramento de Threads (Opcional, mas útil) ---
# Necessário para ver informações das tarefas (runtime, stack, etc.)
CONFIG_THREAD_MONITOR=y
CONFIG_THREAD_NAME=y
# Habilita estatísticas de runtime (uso de CPU por thread)
CONFIG_SCHED_THREAD_USAGE=y
CONFIG_SCHED_THREAD_USAGE_ANALYSIS=y
